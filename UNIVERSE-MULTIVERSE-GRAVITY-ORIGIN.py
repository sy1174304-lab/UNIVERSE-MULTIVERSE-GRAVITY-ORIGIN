import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

class आकाशगंगा:
    def __init__(self, नाम: str, द्रव्यमान: float, स्थिति: list, वेग: list):
        self.नाम = नाम
        self.द्रव्यमान = द्रव्यमान
        self.स्थिति = np.array(स्थिति, dtype=np.float64)
        self.वेग = np.array(वेग, dtype=np.float64)

class ग्रह:
    def __init__(self, नाम: str, द्रव्यमान: float, स्थिति: list, वेग: list, आकाशगंगा: आकाशगंगा):
        self.नाम = नाम
        self.द्रव्यमान = द्रव्यमान
        self.स्थिति = np.array(स्थिति, dtype=np.float64)
        self.वेग = np.array(वेग, dtype=np.float64)
        self.आकाशगंगा = आकाशगंगा

class बहुवर्ष:
    def __init__(self):
        self.आकाशगंगाएं = []
        self.ग्रह = []

    def आकाशगंगा_जोड़ना(self, आकाशगंगा: आकाशगंगा):
        self.आकाशगंगाएं.append(आकाशगंगा)

    def ग्रह_जोड़ना(self, ग्रह: ग्रह):
        self.ग्रह.append(ग्रह)

    def अनुकरण(self, समय: float):
        # मास्टर शिवम 
        c = 3e8  # prakash ki gati
        R = 1e10 # black hole ka radius (default maan liya hai formula ke liye)

        for आकाश in self.आकाशगंगाएं:
             आकाश.स्थिति += आकाश.वेग * समय

        for ग्रह in self.ग्रह:
             # दूरी (r) और गति (v) की गणना
             लक्ष्य = ग्रह.आकाशगंगा
             r_vec = लक्ष्य.स्थिति - ग्रह.स्थिति
             r = np.linalg.norm(r_vec)
             v = np.linalg.norm(ग्रह.वेग)
             
             if r > 0:
                 M1 = लक्ष्य.द्रव्यमान
                 M2 = ग्रह.द्रव्यमान
                 
                 # --- MASTER SHIVAM FORMULA START ---
                 G_force = (M1 * M2) / (r**2 * (1 + (M1 * M2) / (r**2 * c**2 * (1 - (v**2 / c**2)) * (1 + (v**2 / c**2 * (1 - (r**2 / R**2)))))))
                 # --- MASTER SHIVAM FORMULA END ---
                 
                 # बल की दिशा और वेग अपडेट
                 दिशा = r_vec / r
                 बल = दिशा * G_force
                 त्वरण = बल / M2
                 ग्रह.वेग += त्वरण * समय

             ग्रह.स्थिति += ग्रह.वेग * समय

    def प्लॉट(self):
        fig = plt.figure()
        ax = fig.add_subplot(111, projection='3d')
        for आकाशगंगा in self.आकाशगंगाएं:
            ax.scatter(आकाशगंगा.स्थिति[0], आकाशगंगा.स्थिति[1], आकाशगंगा.स्थिति[2], c='b')
        for ग्रह in self.ग्रह:
            ax.scatter(ग्रह.स्थिति[0], ग्रह.स्थिति[1], ग्रह.स्थिति[2], c='r')
        plt.show()

def संदेश_भेजना(संदेश: str, आकाशगंगा: आकाशगंगा):
    print(f"आकाशगंगा {आकाशगंगा.नाम} को संदेश भेजा गया: {संदेश}")

def संदेश_प्राप्त(आकाशगंगा: आकाशगंगा):
    print(f"आकाशगंगा {आकाशगंगा.नाम} से संदेश प्राप्त हुआ: नमस्कार, पृथ्वी!")

def दूरी_गणना(आकाशगंगा1: आकाशगंगा, आकाशगंगा2: आकाशगंगा) -> float:
    return np.linalg.norm(आकाशगंगा1.स्थिति - आकाशगंगा2.स्थिति)

def संदेश_स्थानांतरण(आकाशगंगा1: आकाशगंगा, आकाशगंगा2: आकाशगंगा, संदेश: str):
    दूरी = दूरी_गणना(आकाशगंगा1, आकाशगंगा2)
    print(f"आकाशगंगा {आकाशगंगा1.नाम} से आकाशगंगा {आकाशगंगा2.नाम} को संदेश भेजा गया: {संदेश}")
    print(f"आकाशगंगा {आकाशगंगा2.नाम} पर संदेश प्राप्त हुआ: {संदेश}")

# बहुवर्ष बनाएं
बहुवर्ष_obj = बहुवर्ष()

# आकाशगंगाएं और ग्रह बनाएं
आकाशगंगा1 = आकाशगंगा("आकाशगंगा 1", 1e30, [0, 0, 0], [0, 0, 0]) # Mass increased for formula
आकाशगंगा2 = आकाशगंगा("आकाशगंगा 2", 1e30, [1000, 0, 0], [0, 0, 0])
ग्रह1 = ग्रह("पृथ्वी", 100, [0, 100, 0], [10, 0, 0], आकाशगंगा1) # Initial velocity added
ग्रह2 = ग्रह("मंगल", 100, [1000, 100, 0], [10, 0, 0], आकाशगंगा2)

# आकाशगंगाएं और ग्रह बहुवर्ष में जोड़ें
बहुवर्ष_obj.आकाशगंगा_जोड़ना(आकाशगंगा1)
बहुवर्ष_obj.आकाशगंगा_जोड़ना(आकाशगंगा2)
बहुवर्ष_obj.ग्रह_जोड़ना(ग्रह1)
बहुवर्ष_obj.ग्रह_जोड़ना(ग्रह2)

# आकाशगंगाओं और ग्रहों की गति का अनुकरण करें
for _ in range(100):
    बहुवर्ष_obj.अनुकरण(0.1)

# आकाशगंगाओं और ग्रहों की स्थिति का प्लॉट बनाएं
बहुवर्ष_obj.प्लॉट()
